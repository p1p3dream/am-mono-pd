-- +migrate Up

--------------------------------------------------------------------------------
-- FirstAmerican - Data File - Assessor.
--------------------------------------------------------------------------------

create table fa_df_assessor (
	am_id         uuid not null,
	am_created_at timestamp with time zone not null,
	am_updated_at timestamp with time zone not null,
	am_meta       jsonb,

	fips                          text not null,
	property_id                   bigint not null,
	apn                           text not null,
	apn_seq_nbr                   text,
	old_apn                       text,
	old_apn_indicator             text,
	tax_account_number            text,
	situs_full_street_address     text,
	situs_house_nbr               text,
	situs_house_nbr_suffix        text,
	situs_direction_left          text,
	situs_street                  text,
	situs_mode                    text,
	situs_direction_right         text,
	situs_unit_type               text,
	situs_unit_nbr                text,
	situs_city                    text,
	situs_state                   text,
	situs_zip5                    text,
	situs_zip4                    text,
	situs_carrier_code            text,
	situs_latitude                double precision,
	situs_longitude               double precision,
	situs_geo_status_code         text,
	property_class_id             text,
	land_use_code                 text,
	state_land_use_code           text,
	county_land_use_code          text,
	zoning                        text,
	situs_census_tract            text,
	situs_census_block            integer,
	mobile_home_ind               boolean,
	timeshare_code                boolean,
	school_district_name          text,
	lot_size_frontage_feet        text,
	lot_size_depth_feet           integer,
	lot_size_acres                text,
	lot_size_sq_ft                integer,
	owner1corp_ind                boolean,
	owner1last_name               text,
	owner1first_name              text,
	owner1middle_name             text,
	owner1suffix                  text,
	owner2corp_ind                boolean,
	owner2last_name               text,
	owner2first_name              text,
	owner2middle_name             text,
	owner2suffix                  text,
	owner_name1full               text,
	owner_name2full               text,
	owner_occupied                boolean,
	owner1ownership_rights        text,
	mailing_full_street_address   text,
	mailing_house_nbr             text,
	mailing_house_nbr_suffix      text,
	mailing_direction_left        text,
	mailing_street                text,
	mailing_mode                  text,
	mailing_direction_right       text,
	mailing_unit_type             text,
	mailing_unit_nbr              text,
	mailing_city                  text,
	mailing_state                 text,
	mailing_zip5                  text,
	mailing_zip4                  text,
	mailing_carrier_code          text,
	mailing_opt_out               boolean,
	mailing_co_name               text,
	mailing_foreign_address_ind   text,
	assd_total_value              integer,
	assd_land_value               integer,
	assd_improvement_value        integer,
	market_total_value            integer,
	market_value_land             integer,
	market_value_improvement      integer,
	tax_amt                       bigint,
	tax_year                      integer,
	tax_deliquent_year            integer,
	market_year                   integer,
	assd_year                     integer,
	tax_rate_code_area            text,
	school_tax_district1code      text,
	school_tax_district2code      text,
	school_tax_district3code      text,
	homestead_ind                 boolean,
	veteran_ind                   boolean,
	disabled_ind                  boolean,
	widow_ind                     boolean,
	senior_ind                    boolean,
	school_college_ind            boolean,
	religious_ind                 boolean,
	welfare_ind                   boolean,
	public_utility_ind            boolean,
	cemetery_ind                  boolean,
	hospital_ind                  boolean,
	library_ind                   boolean,
	building_area                 decimal,
	building_area_ind             text,
	sum_building_sq_ft            decimal,
	sum_living_area_sq_ft         integer,
	sum_ground_floor_sq_ft        integer,
	sum_gross_area_sq_ft          integer,
	sum_adj_area_sq_ft            integer,
	attic_sq_ft                   integer,
	attic_unfinished_sq_ft        integer,
	attic_finished_sq_ft          integer,
	sum_basement_sq_ft            integer,
	basement_unfinished_sq_ft     integer,
	basement_finished_sq_ft       integer,
	sum_garage_sq_ft              integer,
	garage_un_finished_sq_ft      integer,
	garage_finished_sq_ft         integer,
	year_built                    integer,
	effective_year_built          integer,
	bedrooms                      decimal,
	total_rooms                   decimal,
	bath_total_calc               decimal,
	bath_full                     decimal,
	baths_partial_nbr             decimal,
	bath_fixtures_nbr             decimal,
	amenities                     text,
	air_conditioning_code         integer,
	basement_code                 integer,
	building_class_code           integer,
	building_condition_code       integer,
	construction_type_code        integer,
	deck_ind                      boolean,
	exterior_walls_code           integer,
	interior_walls_code           integer,
	fireplace_code                integer,
	floor_cover_code              text,
	garage                        integer,
	heat_code                     integer,
	heating_fuel_type_code        integer,
	site_influence_code           text,
	garage_parking_nbr            integer,
	driveway_code                 text,
	other_rooms                   text,
	patio_code                    integer,
	pool_code                     integer,
	porch_code                    integer,
	building_quality_code         integer,
	roof_cover_code               integer,
	roof_type_code                integer,
	sewer_code                    integer,
	stories_nbr_code              integer,
	style_code                    integer,
	sum_residential_units         decimal,
	sum_buildings_nbr             decimal,
	sum_commercial_units          decimal,
	topography_code               text,
	water_code                    integer,
	lot_code                      text,
	lot_nbr                       text,
	land_lot                      text,
	block                         text,
	section                       text,
	district                      text,
	legal_unit                    text,
	municipality                  text,
	subdivision_name              text,
	subdivision_phase_nbr         text,
	subdivision_tract_nbr         text,
	meridian                      text,
	assessors_map_ref             text,
	legal_description             text,
	current_sale_transaction_id   bigint,
	current_sale_doc_nbr          text,
	current_sale_book             text,
	current_sale_page             text,
	current_sale_recording_date   date,
	current_sale_contract_date    date,
	current_sale_document_type    text,
	current_sales_price           integer,
	current_sales_price_code      integer,
	current_sale_buyer1full_name  text,
	current_sale_buyer2full_name  text,
	current_sale_seller1full_name text,
	current_sale_seller2full_name text,
	concurrent_mtg1doc_nbr        text,
	concurrent_mtg1book           text,
	concurrent_mtg1page           text,
	concurrent_mtg1recording_date date,
	concurrent_mtg1loan_amt       integer,
	concurrent_mtg1lender         text,
	concurrent_mtg1term           text,
	concurrent_mtg1interest_rate  decimal,
	concurrent_mtg1loan_due_date  date,
	concurrent_mtg1loan_type      integer,
	concurrent_mtg1type_financing text,
	concurrent_mtg2doc_nbr        text,
	concurrent_mtg2book           text,
	concurrent_mtg2page           text,
	concurrent_mtg2recording_date date,
	concurrent_mtg2loan_amt       integer,
	concurrent_mtg2lender         text,
	concurrent_mtg2term           text,
	concurrent_mtg2interest_rate  decimal,
	concurrent_mtg2loan_due_date  date,
	concurrent_mtg2loan_type      integer,
	concurrent_mtg2typefinancing  text,
	prev_sale_transaction_id      bigint,
	prev_sale_doc_nbr             text,
	prev_sale_book                text,
	prev_sale_page                text,
	prev_sale_recording_date      date,
	prev_sale_contract_date       date,
	prev_sale_document_type       text,
	prev_sales_price              integer,
	prev_sales_price_code         integer,
	prev_sale_buyer1full_name     text,
	prev_sale_buyer2full_name     text,
	prev_sale_seller1full_name    text,
	prev_sale_seller2full_name    text,
	prev_mtg1doc_nbr              text,
	prev_mtg1book                 text,
	prev_mtg1page                 text,
	prev_mtg1recording_date       date,
	prev_mtg1loan_amt             integer,
	prev_mtg1lender               text,
	prev_mtg1term                 integer,
	prev_mtg1interest_rate        decimal,
	prev_mtg1loan_due_date        date,
	prev_mtg1loan_type            integer,
	prev_mtg1type_financing       text,
	total_open_lien_nbr           integer,
	total_open_lien_amt           integer,
	mtg1transaction_id            bigint,
	mtg1recording_date            date,
	mtg1loan_amt                  integer,
	mtg1lender                    text,
	mtg1private_lender            boolean,
	mtg1term                      text,
	mtg1loan_due_date             date,
	mtg1adj_rider                 boolean,
	mtg1loan_type                 integer,
	mtg1type_financing            text,
	mtg1lien_position             integer,
	mtg2transaction_id            bigint,
	mtg2recording_date            date,
	mtg2loan_amt                  integer,
	mtg2lender                    text,
	mtg2private_lender            boolean,
	mtg2term                      text,
	mtg2loan_due_date             date,
	mtg2adj_rider                 boolean,
	mtg2loan_type                 integer,
	mtg2type_financing            text,
	mtg2lien_position             integer,
	mtg3transaction_id            bigint,
	mtg3recording_date            date,
	mtg3loan_amt                  integer,
	mtg3lender                    text,
	mtg3private_lender            boolean,
	mtg3term                      integer,
	mtg3loan_due_date             date,
	mtg3adj_rider                 boolean,
	mtg3loan_type                 integer,
	mtg3type_financing            text,
	mtg3lien_position             integer,
	mtg4transaction_id            bigint,
	mtg4recording_date            date,
	mtg4loan_amt                  integer,
	mtg4lender                    text,
	mtg4private_lender            boolean,
	mtg4term                      integer,
	mtg4loan_due_date             date,
	mtg4adj_rider                 boolean,
	mtg4loan_type                 integer,
	mtg4type_financing            text,
	mtg4lien_position             integer,
	fa_time_stamp                 date,
	fa_record_type                text,

	primary key (am_id)
);

create index idx_fa_df_assessor_fips on fa_df_assessor (fips);
create index idx_fa_df_assessor_property_id on fa_df_assessor (property_id);
create index idx_fa_df_assessor_apn on fa_df_assessor (apn);
create index idx_fa_df_assessor_upper_situs_full_street_address on fa_df_assessor (upper(trim(situs_full_street_address)));

-- +migrate Down

drop table fa_df_assessor;
