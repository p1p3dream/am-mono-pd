-- +migrate Up

--------------------------------------------------------------------------------
-- AttomData - Data File - Assessor.
--------------------------------------------------------------------------------

create table ad_df_assessor (
	am_id         uuid not null,
	am_created_at timestamp with time zone not null,
	am_updated_at timestamp with time zone not null,
	am_meta       jsonb,

	attomid                                          bigint not null,
	situs_state_code                                 text,
	situs_county                                     text,
	property_jurisdiction_name                       text,
	situs_state_county_fips                          text,
	combined_statistical_area                        text,
	cbsa_name                                        text,
	cbsa_code                                        integer,
	msa_name                                         text,
	msa_code                                         integer,
	metropolitan_division                            text,
	minor_civil_division_name                        text,
	minor_civil_division_code                        integer,
	neighborhood_code                                text,
	census_fips_place_code                           text,
	census_tract                                     integer,
	census_block_group                               integer,
	census_block                                     integer,
	parcel_number_raw                                text,
	parcel_number_formatted                          text,
	parcel_number_year_added                         integer,
	parcel_number_alternate                          text,
	parcel_map_book                                  text,
	parcel_map_page                                  text,
	parcel_number_year_change                        integer,
	parcel_number_previous                           text,
	parcel_account_number                            text,
	property_address_full                            text,
	property_address_house_number                    text,
	property_address_street_direction                text,
	property_address_street_name                     text,
	property_address_street_suffix                   text,
	property_address_street_post_direction           text,
	property_address_unit_prefix                     text,
	property_address_unit_value                      text,
	property_address_city                            text,
	property_address_state                           text,
	property_address_zip                             text,
	property_address_zip4                            text,
	property_address_crrt                            text,
	property_address_info_privacy                    text,
	congressional_district_house                     integer,
	property_latitude                                double precision,
	property_longitude                               double precision,
	geo_quality                                      integer,
	legal_description                                text,
	legal_range                                      text,
	legal_township                                   text,
	legal_section                                    text,
	legal_quarter                                    text,
	legal_quarter_quarter                            text,
	legal_subdivision                                text,
	legal_phase                                      text,
	legal_tract_number                               text,
	legal_block1                                     text,
	legal_block2                                     text,
	legal_lot_number1                                text,
	legal_lot_number2                                text,
	legal_lot_number3                                text,
	legal_unit                                       text,
	party_owner1name_full                            text,
	party_owner1name_first                           text,
	party_owner1name_middle                          text,
	party_owner1name_last                            text,
	party_owner1name_suffix                          text,
	trust_description                                text,
	company_flag                                     boolean,
	party_owner2name_full                            text,
	party_owner2name_first                           text,
	party_owner2name_middle                          text,
	party_owner2name_last                            text,
	party_owner2name_suffix                          text,
	owner_type_description1                          text,
	ownership_vesting_relation_code                  integer,
	party_owner3name_full                            text,
	party_owner3name_first                           text,
	party_owner3name_middle                          text,
	party_owner3name_last                            text,
	party_owner3name_suffix                          text,
	party_owner4name_full                            text,
	party_owner4name_first                           text,
	party_owner4name_middle                          text,
	party_owner4name_last                            text,
	party_owner4name_suffix                          text,
	owner_type_description2                          text,
	contact_owner_mailing_county                     text,
	contact_owner_mailing_fips                       text,
	contact_owner_mail_address_full                  text,
	contact_owner_mail_address_house_number          text,
	contact_owner_mail_address_street_direction      text,
	contact_owner_mail_address_street_name           text,
	contact_owner_mail_address_street_suffix         text,
	contact_owner_mail_address_street_post_direction text,
	contact_owner_mail_address_unit_prefix           text,
	contact_owner_mail_address_unit                  text,
	contact_owner_mail_address_city                  text,
	contact_owner_mail_address_state                 text,
	contact_owner_mail_address_zip                   text,
	contact_owner_mail_address_zip4                  text,
	contact_owner_mail_address_crrt                  text,
	contact_owner_mail_address_info_format           text,
	contact_owner_mail_info_privacy                  text,
	status_owner_occupied_flag                       boolean,
	deed_owner1name_full                             text,
	deed_owner1name_first                            text,
	deed_owner1name_middle                           text,
	deed_owner1name_last                             text,
	deed_owner1name_suffix                           text,
	deed_owner2name_full                             text,
	deed_owner2name_first                            text,
	deed_owner2name_middle                           text,
	deed_owner2name_last                             text,
	deed_owner2name_suffix                           text,
	deed_owner3name_full                             text,
	deed_owner3name_first                            text,
	deed_owner3name_middle                           text,
	deed_owner3name_last                             text,
	deed_owner3name_suffix                           text,
	deed_owner4name_full                             text,
	deed_owner4name_first                            text,
	deed_owner4name_middle                           text,
	deed_owner4name_last                             text,
	deed_owner4name_suffix                           text,
	tax_year_assessed                                integer,
	tax_assessed_value_total                         integer,
	tax_assessed_value_improvements                  integer,
	tax_assessed_value_land                          integer,
	tax_assessed_improvements_perc                   decimal,
	previous_assessed_value                          integer,
	tax_market_value_year                            integer,
	tax_market_value_total                           integer,
	tax_market_value_improvements                    integer,
	tax_market_value_land                            integer,
	tax_market_improvements_perc                     decimal,
	tax_fiscal_year                                  integer,
	tax_rate_area                                    text,
	tax_billed_amount                                decimal,
	tax_delinquent_year                              integer,
	last_assessor_tax_roll_update                    date,
	assr_last_updated                                date,
	tax_exemption_homeowner_flag                     boolean,
	tax_exemption_disabled_flag                      boolean,
	tax_exemption_senior_flag                        boolean,
	tax_exemption_veteran_flag                       boolean,
	tax_exemption_widow_flag                         boolean,
	tax_exemption_additional                         boolean,
	year_built                                       integer,
	year_built_effective                             integer,
	zoned_code_local                                 text,
	property_use_muni                                text,
	property_use_group                               text,
	property_use_standardized                        integer,
	assessor_last_sale_date                          date,
	assessor_last_sale_amount                        integer,
	assessor_prior_sale_date                         date,
	assessor_prior_sale_amount                       integer,
	last_ownership_transfer_date                     date,
	last_ownership_transfer_document_number          text,
	last_ownership_transfer_transaction_id           integer,
	deed_last_sale_document_book                     text,
	deed_last_sale_document_page                     text,
	deed_last_document_number                        text,
	deed_last_sale_date                              date,
	deed_last_sale_price                             integer,
	deed_last_sale_transaction_id                    integer,
	area_building                                    integer,
	area_building_definition_code                    integer,
	area_gross                                       integer,
	area1st_floor                                    integer,
	area2nd_floor                                    integer,
	area_upper_floors                                integer,
	area_lot_acres                                   double precision,
	area_lot_sf                                      decimal,
	area_lot_depth                                   decimal,
	area_lot_width                                   decimal,
	rooms_attic_area                                 integer,
	rooms_attic_flag                                 boolean,
	rooms_basement_area                              integer,
	rooms_basement_area_finished                     integer,
	rooms_basement_area_unfinished                   integer,
	parking_garage                                   integer,
	parking_garage_area                              integer,
	parking_carport                                  boolean,
	parking_carport_area                             integer,
	hvac_cooling_detail                              integer,
	hvac_heating_detail                              integer,
	hvac_heating_fuel                                integer,
	utilities_sewage_usage                           integer,
	utilities_water_source                           integer,
	utilities_mobile_home_hookup_flag                boolean,
	foundation                                       integer,
	construction                                     integer,
	interior_structure                               integer,
	plumbing_fixtures_count                          integer,
	construction_fire_resistance_class               integer,
	safety_fire_sprinklers_flag                      boolean,
	flooring_material_primary                        integer,
	bath_count                                       decimal,
	bath_partial_count                               integer,
	bedrooms_count                                   integer,
	rooms_count                                      integer,
	stories_count                                    integer,
	units_count                                      integer,
	rooms_bonus_room_flag                            boolean,
	rooms_breakfast_nook_flag                        boolean,
	rooms_cellar_flag                                boolean,
	rooms_cellar_wine_flag                           boolean,
	rooms_exercise_flag                              boolean,
	rooms_family_code                                boolean,
	rooms_game_flag                                  boolean,
	rooms_great_flag                                 boolean,
	rooms_hobby_flag                                 boolean,
	rooms_laundry_flag                               boolean,
	rooms_media_flag                                 boolean,
	rooms_mud_flag                                   boolean,
	rooms_office_area                                integer,
	rooms_office_flag                                boolean,
	rooms_safe_room_flag                             boolean,
	rooms_sitting_flag                               boolean,
	rooms_storm_shelter                              boolean,
	rooms_study_flag                                 boolean,
	rooms_sunroom_flag                               boolean,
	rooms_utility_area                               integer,
	rooms_utility_code                               boolean,
	fireplace                                        integer,
	fireplace_count                                  integer,
	accessability_elevator_flag                      boolean,
	accessability_handicap_flag                      boolean,
	escalator_flag                                   boolean,
	central_vacuum_flag                              boolean,
	content_intercom_flag                            boolean,
	content_sound_system_flag                        boolean,
	wet_bar_flag                                     boolean,
	security_alarm_flag                              boolean,
	structure_style                                  integer,
	exterior1code                                    text,
	roof_material                                    integer,
	roof_construction                                integer,
	content_storm_shutter_flag                       boolean,
	content_overhead_door_flag                       boolean,
	view_description                                 text,
	porch_code                                       text,
	porch_area                                       integer,
	patio_area                                       integer,
	deck_flag                                        boolean,
	deck_area                                        integer,
	feature_balcony_flag                             boolean,
	balcony_area                                     integer,
	breezeway_flag                                   boolean,
	parking_rv_parking_flag                          boolean,
	parking_space_count                              integer,
	driveway_area                                    integer,
	driveway_material                                text,
	pool                                             integer,
	pool_area                                        integer,
	content_sauna_flag                               boolean,
	topography_code                                  integer,
	fence_code                                       boolean,
	fence_area                                       integer,
	courtyard_flag                                   boolean,
	courtyard_area                                   integer,
	arbor_pergola_flag                               boolean,
	sprinklers_flag                                  boolean,
	golf_course_green_flag                           boolean,
	tennis_court_flag                                boolean,
	sports_court_flag                                boolean,
	arena_flag                                       boolean,
	water_feature_flag                               boolean,
	pond_flag                                        boolean,
	boat_lift_flag                                   boolean,
	buildings_count                                  integer,
	bath_house_area                                  integer,
	bath_house_flag                                  boolean,
	boat_access_flag                                 boolean,
	boat_house_area                                  integer,
	boat_house_flag                                  boolean,
	cabin_area                                       integer,
	cabin_flag                                       boolean,
	canopy_area                                      integer,
	canopy_flag                                      boolean,
	gazebo_area                                      integer,
	gazebo_flag                                      boolean,
	grainery_area                                    integer,
	grainery_flag                                    boolean,
	green_house_area                                 integer,
	green_house_flag                                 boolean,
	guest_house_area                                 integer,
	guest_house_flag                                 boolean,
	kennel_area                                      integer,
	kennel_flag                                      boolean,
	lean_to_area                                     integer,
	lean_to_flag                                     boolean,
	loading_platform_area                            integer,
	loading_platform_flag                            boolean,
	milk_house_area                                  integer,
	milk_house_flag                                  boolean,
	outdoor_kitchen_fireplace_flag                   boolean,
	pool_house_area                                  integer,
	pool_house_flag                                  boolean,
	poultry_house_area                               integer,
	poultry_house_flag                               boolean,
	quonset_area                                     integer,
	quonset_flag                                     boolean,
	shed_area                                        integer,
	shed_code                                        boolean,
	silo_area                                        integer,
	silo_flag                                        boolean,
	stable_area                                      integer,
	stable_flag                                      boolean,
	storage_building_area                            integer,
	storage_building_flag                            boolean,
	utility_building_area                            integer,
	utility_building_flag                            boolean,
	pole_structure_area                              integer,
	pole_structure_flag                              boolean,
	community_rec_room_flag                          boolean,
	publication_date                                 date,
	parcel_shell_record                              boolean,

	primary key (am_id)
);

create index idx_ad_df_assessor_attomid on ad_df_assessor (attomid);
create index idx_ad_df_situs_state_county_fips on ad_df_assessor (situs_state_county_fips);
create index idx_ad_df_assessor_upper_property_address_full on ad_df_assessor (upper(trim(property_address_full)));

-- +migrate Down

drop table ad_df_assessor;
